# 部署 Hydro

本页面将指导您部署 Hydro。  
这里提供了几套方案帮助您建立自己的站点，请选择适合您的方案并继续。  
搭建过程中如果遇到问题欢迎 [联系我们](/#联系我们) 提问。  

## 服务器选择

不同服务商提供的 CPU 主频不同，下方数据仅供参考。  
最低服务器配置： CPU: 1核 内存: 2G 硬盘: 20G。（约可允许 100 人同时使用）  
**请尽量不要使用突发性能实例或共享型实例，这可能会导致评测时间计量不准确**

## 部署

:::tip
Hydro 需要使用以下端口： 8888, 9000, 5050, 27017，请确保这些端口空闲。  
**安装和安装后的所有操作均需要在 root 权限下进行！（`sudo su`）**。  
**非常不建议您在生产环境使用宝塔面板。**  
:::

:::tip
CentOS 8 [已于 2021-12-31 停止支持](https://www.centos.org/centos-linux-eol/)，Hydro 也不再对该系统提供兼容性测试。  
自动安装脚本目前支持除 CentOS 以外的大部分 x64 Linux 发行版。推荐使用 `Ubuntu 20.04`。  
警惕各大平台的变种 CentOS 系统！请不要使用 `Alibaba Cloud Linux` 和 `TencentOS` 等！
:::

运行下面的脚本，等待几分钟即可：

```sh
LANG=zh . <(curl https://hydro.ac/setup.sh)
```

脚本默认使用的为清华大学镜像。  
安装完成后，从 `http://服务器ip:8888/` 访问网页端，注册一个账号，之后在终端中使用  

```sh
hydrooj cli user setSuperAdmin 2
```

将首个注册用户设置为超级管理员。之后刷新页面，您应当能在导航栏看到控制面板入口。  
进入控制面板，右侧进入系统设置，填写如下内容：  

- Server Name: 您的 OJ 的名称。  
- Server BaseURL: 网站完整的 URL，需要以 `/` 结尾。（重要，务必正确填写）  
- IP Header: 若使用反向代理（含 Cloudflare 等 CDN 服务），请设置为其 IP Header（通常为 `x-forwarded-for` 或 `x-real-ip`，小写）。在不使用反向代理的情况下请勿配置该项，否则用户将可以伪造 IP 。

至此，基础功能安装已全部完成，另，如果你的服务部署在内网，且希望外网的用户可以访问，可以百度搜索 “端口映射” 相关教程。
